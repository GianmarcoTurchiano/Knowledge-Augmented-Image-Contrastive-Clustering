schema: '2.0'
stages:
  filtering:
    cmd: python -m kaicc.filter --input_triples_file data/raw/triples.csv --output_triples_file
      data/processed/triples.csv --output_labels_file data/interim/labels.csv
    deps:
    - path: data/raw/triples.csv
      hash: md5
      md5: d3d798c0961095359b12cd66a6044eca
      size: 70522438
    - path: kaicc/filter.py
      hash: md5
      md5: 0e38a5a89cf410e53a5559a2974c9b6e
      size: 1352
    outs:
    - path: data/interim/labels.csv
      hash: md5
      md5: dc54916f8318f0e1b331976dea612c2c
      size: 9097263
    - path: data/processed/triples.csv
      hash: md5
      md5: 336c8c1cedac476637eae0b08ab5f440
      size: 52514134
  preprocessing:
    cmd: python -m kaicc.preprocess --input_triples_file_path data/raw/triples.csv
      --output_triples_file_path data/processed/triples.csv --output_labels_file_path
      data/processed/clustering_labels.csv
    deps:
    - path: data/raw/triples.csv
      hash: md5
      md5: d3d798c0961095359b12cd66a6044eca
      size: 70522438
    - path: kaicc/preprocess.py
      hash: md5
      md5: 26162391f93b1b93275d95679b0c4b5b
      size: 1698
    outs:
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/processed/triples.csv
      hash: md5
      md5: ceb07f08415ab5ffea6fd9efd678121b
      size: 47070166
  node_texts_generation:
    cmd: python -m kaicc.generate_node_texts --input_triples_file_path data/processed/triples.csv
      --output_node_texts_file_path data/processed/entities_texts.csv
    deps:
    - path: data/processed/triples.csv
      hash: md5
      md5: ceb07f08415ab5ffea6fd9efd678121b
      size: 47070166
    - path: kaicc/generate_node_texts.py
      hash: md5
      md5: 7764274afb0413dc2e37e34684cbd6e4
      size: 1263
    outs:
    - path: data/processed/entities_texts.csv
      hash: md5
      md5: 7397d85997da92be086d6efe988b91fb
      size: 1358022
  labels_splitting:
    cmd: python -m kaicc.split_labels --input_labels_file_path data/interim/labels.csv
      --output_pretraining_labels_file_path data/interim/pretraining_labels.csv --output_clustering_labels_file_path
      data/processed/clustering_labels.csv --pretraining_labels_ratio 0.2 --random_seed
      42
    deps:
    - path: data/interim/labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: kaicc/split_labels.py
      hash: md5
      md5: 5af1359ff00450b2178b148c54a8e169
      size: 879
    outs:
    - path: data/interim/pretraining_labels.csv
      hash: md5
      md5: cfcdea28bf22c7e8bbcd449857695861
      size: 1819183
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: c95c6ebc657ff71df8cf3811a4ce1bc5
      size: 7278120
  image_vs_image_raw_clustering:
    cmd: python -m kaicc.cluster_image_vs_image_raw --image_archive_path data/raw/images.tar.gz
      --image_directory_path data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --output_run_id_path models/image_vs_image_raw.txt --clip_base_model_name openai/clip-vit-base-patch32
      --random_seed 42 --patience 3 --clusters_count 18 --embeddings_dimension 128
      --epochs_count 1 --learning_rate 0.0003 --batch_size 768 --regularization_strength
      1.0 --temperature_embeddings 0.5 --temperature_clusters 1.0 --size 224 --scale
      0.2 1.0 --brightness 0.4 --contrast 0.4 --saturation 0.4 --hue 0.1 --p_color_jitter
      0.8 --p_gray_scale 0.2 --p_gaussian_blur 0.5 --sigma 0.1 2.0
    deps:
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/cluster_image_vs_image_raw.py
      hash: md5
      md5: 7b47a9254be90e4cff727fc9cac4f6e0
      size: 4524
    outs:
    - path: models/image_vs_image_raw.txt
      hash: md5
      md5: b6cc01eaf94b8a03e14bcf06941f2d37
      size: 32
  image_vs_image_clustering:
    cmd: python -m kaicc.cluster_image_vs_image --image_archive_path data/raw/images.tar.gz
      --image_directory_path data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --output_run_id_path models/image_vs_image.txt --clip_base_model_name openai/clip-vit-base-patch32
      --random_seed 42 --patience 3 --clusters_count 18 --embeddings_dimension 128
      --epochs_count 1 --learning_rate 0.0003 --batch_size 768 --regularization_strength
      1.0 --temperature_embeddings 0.5 --temperature_clusters 1.0 --size 224 --scale
      0.2 1.0 --brightness 0.4 --contrast 0.4 --saturation 0.4 --hue 0.1 --p_color_jitter
      0.8 --p_gray_scale 0.2 --p_gaussian_blur 0.5 --sigma 0.1 2.0
    deps:
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/cluster_image_vs_image.py
      hash: md5
      md5: 9a93a3d09fbeca89666d80651d951ada
      size: 4532
    outs:
    - path: models/image_vs_image.txt
      hash: md5
      md5: f03582ca1e70a77bec41eb3ed6642e0a
      size: 32
  image_vs_text_clustering:
    cmd: python -m kaicc.cluster_image_vs_text --image_archive_path data/raw/images.tar.gz
      --image_directory_path data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --captions_file_path data/processed/captions.csv --output_run_id_path models/image_vs_text.txt
      --clip_base_model_name openai/clip-vit-base-patch32 --random_seed 42 --patience
      3 --clusters_count 18 --embeddings_dimension 128 --epochs_count 1 --learning_rate
      0.0003 --batch_size 768 --regularization_strength 1.0 --temperature_embeddings
      0.5 --temperature_clusters 1.0 --size 224
    deps:
    - path: data/processed/captions.csv
      hash: md5
      md5: 4fd622419e8e35df930cb78356c9caf2
      size: 40456760
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/cluster_image_vs_text.py
      hash: md5
      md5: bfde521ac9246bcde713ca375cdaee57
      size: 3298
    outs:
    - path: models/image_vs_text.txt
      hash: md5
      md5: 7ef534032b77573f14d3c230d7b0396f
      size: 32
  image_vs_text_raw_clustering:
    cmd: python -m kaicc.cluster_image_vs_text_raw --image_archive_path data/raw/images.tar.gz
      --image_directory_path data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --captions_file_path data/processed/captions.csv --output_run_id_path models/image_vs_text_raw.txt
      --clip_base_model_name openai/clip-vit-base-patch32 --random_seed 42 --patience
      3 --clusters_count 18 --embeddings_dimension 128 --epochs_count 1 --learning_rate
      0.0003 --batch_size 768 --regularization_strength 1.0 --temperature_embeddings
      0.5 --temperature_clusters 1.0 --size 224
    deps:
    - path: data/processed/captions.csv
      hash: md5
      md5: 4fd622419e8e35df930cb78356c9caf2
      size: 40456760
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/cluster_image_vs_text_raw.py
      hash: md5
      md5: 1e579ea222fb1e82ad6801a877caa442
      size: 3308
    outs:
    - path: models/image_vs_text_raw.txt
      hash: md5
      md5: daee7a62327326984d818ecbb42a134e
      size: 32
  transformed_image_vs_text_clustering:
    cmd: python -m kaicc.cluster_transformed_image_vs_text --image_archive_path data/raw/images.tar.gz
      --image_directory_path data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --captions_file_path data/processed/captions.csv --output_run_id_path models/transformed_image_vs_text.txt
      --clip_base_model_name openai/clip-vit-base-patch32 --random_seed 42 --patience
      3 --clusters_count 18 --embeddings_dimension 128 --epochs_count 1 --learning_rate
      0.0003 --batch_size 768 --regularization_strength 1.0 --temperature_embeddings
      0.5 --temperature_clusters 1.0 --size 224 --scale 0.2 1.0 --brightness 0.4 --contrast
      0.4 --saturation 0.4 --hue 0.1 --p_color_jitter 0.8 --p_gray_scale 0.2 --p_gaussian_blur
      0.5 --sigma 0.1 2.0
    deps:
    - path: data/processed/captions.csv
      hash: md5
      md5: 4fd622419e8e35df930cb78356c9caf2
      size: 40456760
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/cluster_transformed_image_vs_text.py
      hash: md5
      md5: bcc7952a4d1429c272035fdece2fdd76
      size: 4648
    outs:
    - path: models/transformed_image_vs_text.txt
      hash: md5
      md5: 8f5a45b9f34cacc1b3f811ab5de9809c
      size: 32
  transformed_image_vs_text_raw_clustering:
    cmd: python -m kaicc.cluster_transformed_image_vs_text_raw --image_archive_path
      data/raw/images.tar.gz --image_directory_path data/processed/images --labels_file_path
      data/processed/clustering_labels.csv --captions_file_path data/processed/captions.csv
      --output_run_id_path models/transformed_image_vs_text_raw.txt --clip_base_model_name
      openai/clip-vit-base-patch32 --random_seed 42 --patience 3 --clusters_count
      18 --embeddings_dimension 128 --epochs_count 1 --learning_rate 0.0003 --batch_size
      768 --regularization_strength 1.0 --temperature_embeddings 0.5 --temperature_clusters
      1.0 --size 224 --scale 0.2 1.0 --brightness 0.4 --contrast 0.4 --saturation
      0.4 --hue 0.1 --p_color_jitter 0.8 --p_gray_scale 0.2 --p_gaussian_blur 0.5
      --sigma 0.1 2.0
    deps:
    - path: data/processed/captions.csv
      hash: md5
      md5: 4fd622419e8e35df930cb78356c9caf2
      size: 40456760
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/cluster_transformed_image_vs_text_raw.py
      hash: md5
      md5: 2ecf0c54c1d1dab48840a6cf915e2095
      size: 4658
    outs:
    - path: models/transformed_image_vs_text_raw.txt
      hash: md5
      md5: 99b8d00c36c9748856fc091ba0078715
      size: 32
  transformed_image_vs_transformed_image_evaluation:
    cmd: python -m kaicc.evaluate --random_seed 42 --run_id_path models/image_vs_image.txt
      --size 224 --image_archive_path data/raw/images.tar.gz --image_directory_path
      data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --batch_size 512
    deps:
    - path: data/processed/captions.csv
      hash: md5
      md5: 4fd622419e8e35df930cb78356c9caf2
      size: 40456760
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/evaluate.py
      hash: md5
      md5: 47649ac9e6890b106cf0ea52fe264cbc
      size: 4753
    - path: models/image_vs_image.txt
      hash: md5
      md5: bf55d8e9761704cb26a3c308aea6bc99
      size: 32
  transformed_image_vs_transformed_image_single_projection_evaluation:
    cmd: python -m kaicc.evaluate --n_samples 5 --random_seed 42 --run_id_path models/image_vs_image.txt
      --size 224 --image_archive_path data/raw/images.tar.gz --image_directory_path
      data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --batch_size 768
    deps:
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/evaluate.py
      hash: md5
      md5: 843a610f7a4abbe3147aea01da305c49
      size: 6267
    - path: models/image_vs_image.txt
      hash: md5
      md5: f03582ca1e70a77bec41eb3ed6642e0a
      size: 32
  transformed_image_vs_transformed_image_raw_single_projection_evaluation:
    cmd: python -m kaicc.evaluate --n_samples 5 --random_seed 42 --run_id_path models/image_vs_image_raw.txt
      --size 224 --image_archive_path data/raw/images.tar.gz --image_directory_path
      data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --batch_size 768
    deps:
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/evaluate.py
      hash: md5
      md5: 843a610f7a4abbe3147aea01da305c49
      size: 6267
    - path: models/image_vs_image_raw.txt
      hash: md5
      md5: b6cc01eaf94b8a03e14bcf06941f2d37
      size: 32
  image_vs_text_single_projection_evaluation:
    cmd: python -m kaicc.evaluate --n_samples 5 --random_seed 42 --run_id_path models/image_vs_text.txt
      --size 224 --image_archive_path data/raw/images.tar.gz --image_directory_path
      data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --batch_size 768
    deps:
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/evaluate.py
      hash: md5
      md5: 843a610f7a4abbe3147aea01da305c49
      size: 6267
    - path: models/image_vs_text.txt
      hash: md5
      md5: 7ef534032b77573f14d3c230d7b0396f
      size: 32
  image_vs_text_raw_double_projection_evaluation:
    cmd: python -m kaicc.evaluate --n_samples 5 --random_seed 42 --run_id_path models/image_vs_text_raw.txt
      --size 224 --image_archive_path data/raw/images.tar.gz --image_directory_path
      data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --batch_size 768
    deps:
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/evaluate.py
      hash: md5
      md5: 843a610f7a4abbe3147aea01da305c49
      size: 6267
    - path: models/image_vs_text_raw.txt
      hash: md5
      md5: daee7a62327326984d818ecbb42a134e
      size: 32
  transformed_image_vs_text_single_projection_evaluation:
    cmd: python -m kaicc.evaluate --n_samples 5 --random_seed 42 --run_id_path models/transformed_image_vs_text.txt
      --size 224 --image_archive_path data/raw/images.tar.gz --image_directory_path
      data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --batch_size 768
    deps:
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/evaluate.py
      hash: md5
      md5: 843a610f7a4abbe3147aea01da305c49
      size: 6267
    - path: models/transformed_image_vs_text.txt
      hash: md5
      md5: 8f5a45b9f34cacc1b3f811ab5de9809c
      size: 32
  transformed_image_vs_text_raw_double_projection_evaluation:
    cmd: python -m kaicc.evaluate --n_samples 5 --random_seed 42 --run_id_path models/transformed_image_vs_text_raw.txt
      --size 224 --image_archive_path data/raw/images.tar.gz --image_directory_path
      data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --batch_size 768
    deps:
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/evaluate.py
      hash: md5
      md5: 843a610f7a4abbe3147aea01da305c49
      size: 6267
    - path: models/transformed_image_vs_text_raw.txt
      hash: md5
      md5: 99b8d00c36c9748856fc091ba0078715
      size: 32
  transformed_image_vs_transformed_image_raw_single_projection_clustering:
    cmd: python -m kaicc.cluster_trans_img_vs_trans_img_raw_1_proj --image_archive_path
      data/raw/images.tar.gz --image_directory_path data/processed/images --labels_file_path
      data/processed/clustering_labels.csv --output_run_id_path models/cluster_trans_img_vs_trans_img_raw_1_proj.txt
      --clip_base_model_name openai/clip-vit-base-patch32 --random_seed 42 --patience
      3 --clusters_count 18 --embeddings_dimension 128 --epochs_count 1 --learning_rate
      0.0003 --batch_size 768 --regularization_strength 1.0 --temperature_embeddings
      0.5 --temperature_clusters 1.0 --size 224 --scale 0.2 1.0 --brightness 0.4 --contrast
      0.4 --saturation 0.4 --hue 0.1 --p_color_jitter 0.8 --p_gray_scale 0.2 --p_gaussian_blur
      0.5 --sigma 0.1 2.0
    deps:
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/cluster_trans_img_vs_trans_img_raw_1_proj.py
      hash: md5
      md5: 8a3d6787d055b3bef22cc916ef3822dc
      size: 4569
    outs:
    - path: models/cluster_trans_img_vs_trans_img_raw_1_proj.txt
      hash: md5
      md5: 7a7e651233cae050d9ae0e9725fd4886
      size: 32
  transformed_image_vs_transformed_image_single_projection_clustering:
    cmd: python -m kaicc.cluster_trans_img_vs_trans_img_1_proj --image_archive_path
      data/raw/images.tar.gz --image_directory_path data/processed/images --labels_file_path
      data/processed/clustering_labels.csv --output_run_id_path models/cluster_trans_img_vs_trans_img_1_proj.txt
      --clip_base_model_name openai/clip-vit-base-patch32 --random_seed 42 --patience
      3 --clusters_count 18 --embeddings_dimension 128 --epochs_count 1 --learning_rate
      0.0003 --batch_size 768 --regularization_strength 1.0 --temperature_embeddings
      0.5 --temperature_clusters 1.0 --size 224 --scale 0.2 1.0 --brightness 0.4 --contrast
      0.4 --saturation 0.4 --hue 0.1 --p_color_jitter 0.8 --p_gray_scale 0.2 --p_gaussian_blur
      0.5 --sigma 0.1 2.0
    deps:
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/cluster_trans_img_vs_trans_img_1_proj.py
      hash: md5
      md5: 085f8067335817636c5b3b0fbad04c4d
      size: 4577
    outs:
    - path: models/cluster_trans_img_vs_trans_img_1_proj.txt
      hash: md5
      md5: b33deb7b98bedc69a0a8aa62d9938567
      size: 32
  image_vs_text_single_projection_clustering:
    cmd: python -m kaicc.cluster_img_vs_txt_1_proj --image_archive_path data/raw/images.tar.gz
      --image_directory_path data/processed/images --labels_file_path data/processed/clustering_labels.csv
      --captions_file_path data/processed/captions.csv --output_run_id_path models/img_vs_txt_1_proj.txt
      --clip_base_model_name openai/clip-vit-base-patch32 --random_seed 42 --patience
      3 --clusters_count 18 --embeddings_dimension 128 --epochs_count 1 --learning_rate
      0.0003 --batch_size 768 --regularization_strength 1.0 --temperature_embeddings
      0.5 --temperature_clusters 1.0 --size 224
    deps:
    - path: data/processed/captions.csv
      hash: md5
      md5: b8a24ff0e27d94a42d6771f719f79688
      size: 111057494
    - path: data/processed/clustering_labels.csv
      hash: md5
      md5: 3e76c6deef586b1cfc531e26faf298a6
      size: 9097263
    - path: data/raw/images.tar.gz
      hash: md5
      md5: 0c051fb68a3f64e50fb2d4652c9bf9da
      size: 1856987749
    - path: kaicc/cluster_img_vs_txt_1_proj.py
      hash: md5
      md5: f83b729b222d6e8c8cebf05e4025bc4d
      size: 3318
    outs:
    - path: models/img_vs_txt_1_proj.txt
      hash: md5
      md5: 56a8d6ea45896f58ebfe8c19f6bb9a9b
      size: 32
